<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EASY SUGURTA</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --secondary-bg: #f2f2f7;
            --accent-color: #005a92;
            --gray-text: #8e8e93;
            --card-shadow: 0 4px 25px rgba(0,0,0,0.06);
            --card-bg: #ffffff;
        }

        body.dark-mode {
            --bg-color: #000000;
            --text-color: #ffffff;
            --secondary-bg: #1c1c1e;
            --accent-color: #0a84ff;
            --gray-text: #a1a1a6;
            --card-shadow: 0 4px 25px rgba(0,0,0,0.4);
            --card-bg: #1c1c1e;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; padding: 16px;
            transition: background-color 0.3s, color 0.3s;
        }

        .header { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
        .header-top { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { width: 140px; height: auto; }

        .lang-switcher { display: flex; gap: 5px; background: var(--secondary-bg); padding: 4px; border-radius: 12px; }
        .lang-btn { 
            border: none; background: transparent; color: var(--text-color); 
            padding: 6px 10px; border-radius: 8px; font-size: 12px; font-weight: 600; cursor: pointer;
        }
        .lang-btn.active { background: var(--accent-color); color: #fff; }

        .theme-toggle {
            background: var(--secondary-bg); border: none; border-radius: 50%;
            width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 18px; color: var(--text-color);
        }

        .card {
            background: var(--card-bg); border-radius: 24px; padding: 24px;
            box-shadow: var(--card-shadow); margin-bottom: 16px;
        }

        .region-toggle { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; padding: 0 5px; }
        .region-text { font-size: 14px; color: var(--text-color); }
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #34c759; }
        input:checked + .slider:before { transform: translateX(24px); }

        h2 { font-size: 24px; font-weight: 700; margin: 0 0 10px 0; }
        .section-title { color: var(--gray-text); font-size: 14px; margin-bottom: 20px; }

        .input-group { background: var(--secondary-bg); border-radius: 16px; padding: 12px 16px; margin-bottom: 12px; }
        .label { font-size: 13px; color: var(--gray-text); display: block; margin-bottom: 4px; }
        select, input { background: transparent; border: none; outline: none; width: 100%; color: var(--text-color); font-size: 17px; }

        .btn-main {
            background: var(--accent-color); color: white; border: none; width: 100%;
            padding: 18px; border-radius: 18px; font-weight: 600; font-size: 17px; cursor: pointer;
        }

        .faq-item { border-bottom: 1px solid var(--secondary-bg); padding: 16px 0; cursor: pointer; }
        .faq-header { display: flex; align-items: center; font-weight: 500; font-size: 16px; }
        .faq-icon { color: var(--gray-text); margin-right: 12px; font-size: 20px; }
        .faq-content { display: none; padding-top: 12px; font-size: 15px; line-height: 1.5; color: var(--gray-text); }
        .faq-content ul { padding-left: 20px; margin: 10px 0; }

        /* –ë–ª–æ–∫ —Ä–∞—Å—á–µ—Ç–∞ –í–°–ï–ì–î–ê –í–ò–î–ï–ù */
        .calc-res { display: block; text-align: left; margin-top: 10px; }
        .price-big { font-size: 28px; font-weight: 800; margin: 8px 0 24px 0; }
    </style>
</head>
<body id="main-body">

    <div class="header">
        <div class="header-top">
            <img src="logo.png" class="logo" alt="EASY SUGURTA">
            <button class="theme-toggle" id="theme-btn" onclick="toggleTheme()">üåì</button>
        </div>
        
        <div class="lang-switcher">
            <button class="lang-btn" id="lang-uz" onclick="changeLang('uz')">UZ</button>
            <button class="lang-btn active" id="lang-ru" onclick="changeLang('ru')">RU</button>
            <button class="lang-btn" id="lang-en" onclick="changeLang('en')">EN</button>
        </div>
    </div>

    <div id="screen-form">
        <h2 id="txt-title">–û–°–ê–ì–û</h2>
        <div class="section-title" id="txt-subtitle">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ</div>

        <div class="card">
            <div class="region-toggle">
                <span class="region-text" id="txt-region">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≥.–¢–∞—à–∫–µ–Ω—Ç –∏–ª–∏ –æ–±–ª.</span>
                <label class="switch">
                    <input type="checkbox" id="region-checkbox" checked onchange="updateLivePrice()">
                    <span class="slider"></span>
                </label>
            </div>

            <div class="input-group">
                <span class="label" id="txt-vtype">–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</span>
                <select id="v-type" onchange="updateLivePrice()">
                    <option value="passenger" id="opt-1">–õ–µ–≥–∫–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</option>
                    <option value="truck" id="opt-2">–ì—Ä—É–∑–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</option>
                    <option value="bus" id="opt-3">–ê–≤—Ç–æ–±—É—Å –∏–ª–∏ –º–∏–∫—Ä–æ–∞–≤—Ç–æ–±—É—Å</option>
                    <option value="other" id="opt-4">–î—Ä—É–≥–∏–µ</option>
                </select>
            </div>

            <div class="input-group">
                <span class="label" id="txt-carnum">–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã</span>
                <input type="text" id="car-num" placeholder="01 A 777 AA">
            </div>

            <div style="display: flex; gap: 10px;">
                <div class="input-group" style="flex: 1;">
                    <span class="label" id="txt-seria">–°–µ—Ä–∏—è</span>
                    <input type="text" id="seria" placeholder="AAF">
                </div>
                <div class="input-group" style="flex: 2;">
                    <span class="label" id="txt-tpnum">–ù–æ–º–µ—Ä —Ç–µ—Ö–ø–∞—Å–ø–æ—Ä—Ç–∞</span>
                    <input type="text" id="tp-num" placeholder="1234567">
                </div>
            </div>
        </div>
    </div>

    <div id="screen-result" class="calc-res">
        <div class="card">
            <h2 id="txt-calc">–†–∞—Å—á–µ—Ç</h2>
            <div class="label" style="margin-top: 20px;" id="txt-cover">–°—É–º–º–∞ –ø–æ–∫—Ä—ã—Ç–∏—è</div>
            <div style="font-size: 22px; font-weight: 700;">80 000 000,00</div>
            
            <div class="label" style="margin-top: 20px;" id="txt-sum">–°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã</div>
            <div class="price-big" id="final-price-display">192 000,00 —Å—û–º</div>
            
            <button class="btn-main" onclick="sendData()" id="btn-cont">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <h3 style="margin: 24px 0 16px 8px;" id="txt-faq-title">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)</h3>
    <div class="card" style="padding: 0 20px; margin-bottom: 40px;">
        <div class="faq-item" onclick="toggleFaq(0)">
            <div class="faq-header"><span class="faq-icon">+</span> <span id="faq-q1">–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ</span></div>
            <div id="faq-0" class="faq-content">
                <ul>
                    <li id="faq-a1-1">–ü–æ –∑–∞–∫–æ–Ω—É –ø–æ–ª–∏—Å –û–°–ê–ì–û —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ–≤–ª–∞–¥–µ–ª—å—Ü–∞.</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const translations = {
            ru: {
                title: "–û–°–ê–ì–û", subtitle: "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–µ —Å—Ä–µ–¥—Å—Ç–≤–æ", region: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≥.–¢–∞—à–∫–µ–Ω—Ç –∏–ª–∏ –æ–±–ª.", vtype: "–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞", carnum: "–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã",
                seria: "–°–µ—Ä–∏—è", tpnum: "–ù–æ–º–µ—Ä —Ç–µ—Ö–ø–∞—Å–ø–æ—Ä—Ç–∞", find: "–ù–∞–π—Ç–∏", faq_title: "–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)",
                q1: "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ", calc: "–†–∞—Å—á–µ—Ç", cover: "–°—É–º–º–∞ –ø–æ–∫—Ä—ã—Ç–∏—è", sum: "–°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã", cont: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å",
                opt1: "–õ–µ–≥–∫–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏", opt2: "–ì—Ä—É–∑–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏", opt3: "–ê–≤—Ç–æ–±—É—Å –∏–ª–∏ –º–∏–∫—Ä–æ–∞–≤—Ç–æ–±—É—Å", opt4: "–î—Ä—É–≥–∏–µ"
            },
            uz: {
                title: "O'SAGO", subtitle: "Transport vositasi", region: "Toshkent sh. yoki viloyatida ro'yxatga olingan", vtype: "Transport turi", carnum: "Mashina raqami",
                seria: "Seriya", tpnum: "Tex-pasport raqami", find: "Topish", faq_title: "Ko'p beriladigan savollar (FAQ)",
                q1: "Nega bu muhim", calc: "Hisob-kitob", cover: "Qoplama summasi", sum: "To'lov summasi", cont: "Davom etish",
                opt1: "Yengil avtomobillar", opt2: "Yuk avtomobillari", opt3: "Avtobus yoki mikroavtobus", opt4: "Boshqalar"
            },
            en: {
                title: "MTPL", subtitle: "Vehicle", region: "Registered in Tashkent city or region", vtype: "Vehicle type", carnum: "Car number",
                seria: "Series", tpnum: "Registration number", find: "Find", faq_title: "Frequently Asked Questions (FAQ)",
                q1: "Why is it important", calc: "Calculation", cover: "Coverage amount", sum: "Payment amount", cont: "Continue",
                opt1: "Passenger cars", opt2: "Trucks", opt3: "Bus or minibus", opt4: "Others"
            }
        };

        function toggleTheme() {
            document.getElementById('main-body').classList.toggle('dark-mode');
            tg.HapticFeedback.impactOccurred('light');
        }

        function changeLang(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('lang-' + lang).classList.add('active');
            const t = translations[lang];
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-subtitle').innerText = t.subtitle;
            document.getElementById('txt-region').innerText = t.region;
            document.getElementById('txt-vtype').innerText = t.vtype;
            document.getElementById('txt-carnum').innerText = t.carnum;
            document.getElementById('txt-seria').innerText = t.seria;
            document.getElementById('txt-tpnum').innerText = t.tpnum;
            document.getElementById('txt-faq-title').innerText = t.faq_title;
            document.getElementById('txt-calc').innerText = t.calc;
            document.getElementById('txt-cover').innerText = t.cover;
            document.getElementById('txt-sum').innerText = t.sum;
            document.getElementById('btn-cont').innerText = t.cont;
            document.getElementById('opt-1').innerText = t.opt1;
            document.getElementById('opt-2').innerText = t.opt2;
            document.getElementById('opt-3').innerText = t.opt3;
            document.getElementById('opt-4').innerText = t.opt4;
            tg.HapticFeedback.selectionChanged();
        }

        function toggleFaq(id) {
            const el = document.getElementById('faq-' + id);
            const isVisible = el.style.display === 'block';
            el.style.display = isVisible ? 'none' : 'block';
            document.querySelectorAll('.faq-icon')[id].innerText = isVisible ? '+' : '‚àí';
        }

        /* –ì–õ–ê–í–ù–ê–Ø –õ–û–ì–ò–ö–ê: –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ü–ï–†–ï–°–ß–ï–¢ –í –†–ï–ê–õ–¨–ù–û–ú –í–†–ï–ú–ï–ù–ò */
        function updateLivePrice() {
            const isTashkent = document.getElementById('region-checkbox').checked;
            const vehicleType = document.getElementById('v-type').value;
            let priceValue = 0;

            // –¶–µ–Ω—ã –¥–ª—è –¢–∞—à–∫–µ–Ω—Ç–∞ (–≤–∫–ª—é—á–µ–Ω–æ) –∏ –æ–±–ª–∞—Å—Ç–µ–π (–≤—ã–∫–ª—é—á–µ–Ω–æ)
            if (vehicleType === "passenger") {
                priceValue = isTashkent ? 192000 : 160000;
            } else if (vehicleType === "truck") {
                priceValue = isTashkent ? 320000 : 280000;
            } else if (vehicleType === "bus") {
                priceValue = isTashkent ? 250000 : 210000;
            } else {
                priceValue = isTashkent ? 150000 : 120000;
            }

            // –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –≤ –±–ª–æ–∫–µ —Ä–∞—Å—á–µ—Ç–∞
            document.getElementById('final-price-display').innerText = priceValue.toLocaleString('ru-RU') + ",00 —Å—û–º";
            tg.HapticFeedback.selectionChanged();
        }

        function sendData() {
            if(!document.getElementById('car-num').value) return tg.showAlert("Error: Enter car number");
            tg.sendData(JSON.stringify({
                car: document.getElementById('car-num').value,
                price: document.getElementById('final-price-display').innerText
            }));
            tg.close();
        }

        // –ó–∞–ø—É—Å–∫ –ø–µ—Ä–≤–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
        updateLivePrice();
    </script>
</body>
</html>
