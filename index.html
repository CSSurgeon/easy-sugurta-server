<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>EASY SUGURTA</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #ffffff;
            --text-color: #000000;
            --secondary-bg: #f2f2f7;
            --accent-color: #005a92;
            --gray-text: #8e8e93;
            --card-shadow: 0 4px 25px rgba(0,0,0,0.06);
            --card-bg: #ffffff;
        }

        body.dark-mode {
            --bg-color: #000000;
            --text-color: #ffffff;
            --secondary-bg: #1c1c1e;
            --accent-color: #0a84ff;
            --gray-text: #a1a1a6;
            --card-shadow: 0 4px 25px rgba(0,0,0,0.4);
            --card-bg: #1c1c1e;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0; padding: 16px;
            transition: background-color 0.3s, color 0.3s;
        }

        .header { display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px; }
        .header-top { display: flex; justify-content: space-between; align-items: center; width: 100%; }
        .logo { width: 140px; height: auto; }

        .lang-switcher { display: flex; gap: 5px; background: var(--secondary-bg); padding: 4px; border-radius: 12px; }
        .lang-btn { 
            border: none; background: transparent; color: var(--text-color); 
            padding: 6px 10px; border-radius: 8px; font-size: 12px; font-weight: 600; cursor: pointer;
        }
        .lang-btn.active { background: var(--accent-color); color: #fff; }

        .theme-toggle {
            background: var(--secondary-bg); border: none; border-radius: 50%;
            width: 36px; height: 36px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; font-size: 18px; color: var(--text-color);
        }

        .card {
            background: var(--card-bg); border-radius: 24px; padding: 24px;
            box-shadow: var(--card-shadow); margin-bottom: 16px;
        }

        .region-toggle { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #34c759; }
        input:checked + .slider:before { transform: translateX(24px); }

        h2 { font-size: 24px; font-weight: 700; margin: 0 0 10px 0; }
        .section-title { color: var(--gray-text); font-size: 14px; margin-bottom: 20px; }

        .input-group { background: var(--secondary-bg); border-radius: 16px; padding: 12px 16px; margin-bottom: 12px; }
        .label { font-size: 13px; color: var(--gray-text); display: block; margin-bottom: 4px; }
        select, input { background: transparent; border: none; outline: none; width: 100%; color: var(--text-color); font-size: 17px; }

        .btn-main {
            background: var(--accent-color); color: white; border: none; width: 100%;
            padding: 18px; border-radius: 18px; font-weight: 600; font-size: 17px; cursor: pointer;
        }

        .faq-item { border-bottom: 1px solid var(--secondary-bg); padding: 16px 0; cursor: pointer; }
        .faq-header { display: flex; align-items: center; font-weight: 500; font-size: 16px; }
        .faq-icon { color: var(--gray-text); margin-right: 12px; font-size: 20px; font-weight: 300; }
        .faq-content { display: none; padding-top: 12px; font-size: 15px; line-height: 1.5; color: var(--gray-text); }
        .faq-content ul { padding-left: 20px; margin: 10px 0; }

        #screen-result { display: none; }
        .price-big { font-size: 28px; font-weight: 800; margin: 8px 0 24px 0; }
    </style>
</head>
<body id="main-body">

    <div class="header">
        <div class="header-top">
            <img src="logo.jpeg" class="logo" alt="EASY SUGURTA">
            <button class="theme-toggle" onclick="toggleTheme()">üåì</button>
        </div>
        <div class="lang-switcher">
            <button class="lang-btn" id="lang-uz" onclick="changeLang('uz')">UZ</button>
            <button class="lang-btn active" id="lang-ru" onclick="changeLang('ru')">RU</button>
            <button class="lang-btn" id="lang-en" onclick="changeLang('en')">EN</button>
        </div>
    </div>

    <div id="screen-form">
        <h2 id="txt-title">–û–°–ê–ì–û</h2>
        <div class="card">
            <div class="region-toggle">
                <span id="txt-region" style="font-size: 14px;">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≥.–¢–∞—à–∫–µ–Ω—Ç –∏–ª–∏ –æ–±–ª.</span>
                <label class="switch">
                    <input type="checkbox" id="region-checkbox" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="input-group">
                <span class="label" id="txt-vtype">–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</span>
                <select id="v-type">
                    <option value="passenger" id="opt-1">–õ–µ–≥–∫–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</option>
                    <option value="truck" id="opt-2">–ì—Ä—É–∑–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏</option>
                    <option value="bus" id="opt-3">–ê–≤—Ç–æ–±—É—Å –∏–ª–∏ –º–∏–∫—Ä–æ–∞–≤—Ç–æ–±—É—Å</option>
                </select>
            </div>
            <div class="input-group">
                <span class="label" id="txt-carnum">–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã</span>
                <input type="text" id="car-num" placeholder="01 A 777 AA">
            </div>
            <button class="btn-main" onclick="showCalc()" id="btn-find">–ù–∞–π—Ç–∏</button>
        </div>
    </div>

    <div id="screen-result">
        <div class="card">
            <h2 id="txt-calc">–†–∞—Å—á–µ—Ç</h2>
            <div class="label" id="txt-cover">–°—É–º–º–∞ –ø–æ–∫—Ä—ã—Ç–∏—è</div>
            <div style="font-size: 22px; font-weight: 700;">80 000 000,00</div>
            <div class="label" style="margin-top: 20px;" id="txt-sum">–°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã</div>
            <div class="price-big" id="final-price-display">192 000,00 —Å—û–º</div>
            <button class="btn-main" onclick="sendData()" id="btn-cont">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>

        <h3 style="margin: 24px 0 16px 8px;" id="txt-faq-title">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)</h3>
        <div class="card" style="padding: 0 20px;">
            <div class="faq-item" onclick="toggleFaq(0)">
                <div class="faq-header"><span class="faq-icon">+</span> <span id="faq-q1">–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ</span></div>
                <div id="faq-0" class="faq-content">
                    <ul>
                        <li id="faq-a1-1">–ü–æ –∑–∞–∫–æ–Ω—É –ø–æ–ª–∏—Å –û–°–ê–ì–û —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ–≤–ª–∞–¥–µ–ª—å—Ü–∞.</li>
                        <li id="faq-a1-2">–ó–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –û–°–ê–ì–û –ø—Ä–∏–¥–µ—Ç—Å—è –∑–∞–ø–ª–∞—Ç–∏—Ç—å —à—Ç—Ä–∞—Ñ.</li>
                    </ul>
                </div>
            </div>
            <div class="faq-item" onclick="toggleFaq(1)">
                <div class="faq-header"><span class="faq-icon">+</span> <span id="faq-q2">–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</span></div>
                <div id="faq-1" class="faq-content">
                    <ul>
                        <li id="faq-a2-1"><b>–£–¥–æ–±–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</b> –ü—Ä–µ–¥—ä—è–≤–ª—è–π—Ç–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –ø–æ–ª–∏—Å —Å–æ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞.</li>
                        <li id="faq-a2-2"><b>–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–Ω–ª–∞–π–Ω:</b> –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±–µ–∑ –≤–∏–∑–∏—Ç–∞ –≤ –æ—Ñ–∏—Å.</li>
                    </ul>
                </div>
            </div>
            <div class="faq-item" onclick="toggleFaq(2)">
                <div class="faq-header"><span class="faq-icon">+</span> <span id="faq-q3">–ß—Ç–æ —Ç–∞–∫–æ–µ –µ–≤—Ä–æ–ø—Ä–æ—Ç–æ–∫–æ–ª?</span></div>
                <div id="faq-2" class="faq-content">
                    <p id="faq-a3">–≠—Ç–æ —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –î–¢–ü –±–µ–∑ –≤—ã–∑–æ–≤–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –ì–£–ë–î–î, –µ—Å–ª–∏ –Ω–µ—Ç –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏—Ö –∏ —É—â–µ—Ä–± –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç.</p>
                </div>
            </div>
            <div class="faq-item" onclick="toggleFaq(3)">
                <div class="faq-header"><span class="faq-icon">+</span> <span id="faq-q4">–ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –û–°–ê–ì–û –æ—Ç –ö–ê–°–ö–û?</span></div>
                <div id="faq-3" class="faq-content">
                    <ul>
                        <li id="faq-a4-1"><b>–û–°–ê–ì–û:</b> —Å—Ç—Ä–∞—Ö—É–µ—Ç –≤–∞—à—É –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ —Ç—Ä–µ—Ç—å–∏–º–∏ –ª–∏—Ü–∞–º–∏.</li>
                        <li id="faq-a4-2"><b>–ö–ê–°–ö–û:</b> —Å—Ç—Ä–∞—Ö—É–µ—Ç —Å–∞–º –∞–≤—Ç–æ–º–æ–±–∏–ª—å –æ—Ç —É—â–µ—Ä–±–∞ –∏ —É–≥–æ–Ω–∞.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        const translations = {
            ru: {
                title: "–û–°–ê–ì–û", region: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ –≥.–¢–∞—à–∫–µ–Ω—Ç –∏–ª–∏ –æ–±–ª.", vtype: "–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞", carnum: "–ù–æ–º–µ—Ä –º–∞—à–∏–Ω—ã",
                find: "–ù–∞–π—Ç–∏", faq_title: "–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã (FAQ)", q1: "–ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ",
                a1_1: "–ü–æ –∑–∞–∫–æ–Ω—É –ø–æ–ª–∏—Å –û–°–ê–ì–û —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≤—Ç–æ–≤–ª–∞–¥–µ–ª—å—Ü–∞.",
                a1_2: "–ó–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –û–°–ê–ì–û –ø—Ä–∏–¥–µ—Ç—Å—è –∑–∞–ø–ª–∞—Ç–∏—Ç—å —à—Ç—Ä–∞—Ñ.", q2: "–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è",
                a2_1: "–£–¥–æ–±–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –ø–æ–ª–∏—Å –≤ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ.",
                a2_2: "–ü–æ–ª–Ω–æ—Å—Ç—å—é –æ–Ω–ª–∞–π–Ω: –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –±–µ–∑ –≤–∏–∑–∏—Ç–∞ –≤ –æ—Ñ–∏—Å.", q3: "–ß—Ç–æ —Ç–∞–∫–æ–µ –µ–≤—Ä–æ–ø—Ä–æ—Ç–æ–∫–æ–ª?",
                a3: "–£–ø—Ä–æ—â—ë–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –î–¢–ü –±–µ–∑ –ì–£–ë–î–î –ø—Ä–∏ –º–∞–ª–æ–º —É—â–µ—Ä–±–µ.",
                q4: "–ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –û–°–ê–ì–û –æ—Ç –ö–ê–°–ö–û?", a4_1: "–û–°–ê–ì–û: –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –¥—Ä—É–≥–∏–º–∏.",
                a4_2: "–ö–ê–°–ö–û: –∑–∞—â–∏—Ç–∞ –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ.", calc: "–†–∞—Å—á–µ—Ç", cover: "–°—É–º–º–∞ –ø–æ–∫—Ä—ã—Ç–∏—è",
                sum: "–°—É–º–º–∞ –æ–ø–ª–∞—Ç—ã", cont: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å", opt1: "–õ–µ–≥–∫–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏", 
                opt2: "–ì—Ä—É–∑–æ–≤—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏", opt3: "–ê–≤—Ç–æ–±—É—Å –∏–ª–∏ –º–∏–∫—Ä–æ–∞–≤—Ç–æ–±—É—Å"
            },
            uz: {
                title: "O'SAGO", region: "Toshkent sh. yoki viloyatida ro'yxatga olingan", vtype: "Transport turi", carnum: "Mashina raqami",
                find: "Topish", faq_title: "Ko'p beriladigan savollar (FAQ)", q1: "Nega bu muhim",
                a1_1: "Qonunga ko'ra, O'SAGO har bir avtomobil egasi uchun majburiy.",
                a1_2: "O'SAGO bo'lmasa, jarima to'lash kerak bo'ladi.", q2: "Sug'urtaning afzalliklari",
                a2_1: "Qulay foydalanish: Elektron polis smartfonda.",
                a2_2: "To'liq onlayn: Ofisga bormasdan.", q3: "Evroprotokol nima?",
                a3: "Kichik zarar bo'lganda YHXB xodimlarisiz rasmiylashtirish usuli.",
                q4: "O'SAGO va KASKO farqi?", a4_1: "O'SAGO: boshqalarga yetkazilgan zarar.",
                a4_2: "KASKO: o'z avtomobilingiz himoyasi.", calc: "Hisob-kitob",
                cover: "Qoplama summasi", sum: "To'lov summasi", cont: "Davom etish",
                opt1: "Yengil avtomobillar", opt2: "Yuk avtomobillari", opt3: "Avtobus yoki mikroavtobus"
            }
        };

        function toggleTheme() { document.getElementById('main-body').classList.toggle('dark-mode'); tg.HapticFeedback.impactOccurred('light'); }

        function changeLang(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('lang-' + lang).classList.add('active');
            const t = translations[lang];
            document.getElementById('txt-title').innerText = t.title;
            document.getElementById('txt-region').innerText = t.region;
            document.getElementById('txt-vtype').innerText = t.vtype;
            document.getElementById('txt-carnum').innerText = t.carnum;
            document.getElementById('btn-find').innerText = t.find;
            document.getElementById('txt-faq-title').innerText = t.faq_title;
            document.getElementById('faq-q1').innerText = t.q1;
            document.getElementById('faq-a1-1').innerText = t.a1_1;
            document.getElementById('faq-a1-2').innerText = t.a1_2;
            document.getElementById('faq-q2').innerText = t.q2;
            document.getElementById('faq-a2-1').innerText = t.a2_1;
            document.getElementById('faq-a2-2').innerText = t.a2_2;
            document.getElementById('faq-q3').innerText = t.q3;
            document.getElementById('faq-a3').innerText = t.a3;
            document.getElementById('faq-q4').innerText = t.q4;
            document.getElementById('faq-a4-1').innerText = t.a4_1;
            document.getElementById('faq-a4-2').innerText = t.a4_2;
            document.getElementById('txt-calc').innerText = t.calc;
            document.getElementById('txt-cover').innerText = t.cover;
            document.getElementById('txt-sum').innerText = t.sum;
            document.getElementById('btn-cont').innerText = t.cont;
            document.getElementById('opt-1').innerText = t.opt1;
            document.getElementById('opt-2').innerText = t.opt2;
            document.getElementById('opt-3').innerText = t.opt3;
            tg.HapticFeedback.selectionChanged();
        }

        function toggleFaq(id) {
            const el = document.getElementById('faq-' + id);
            const isVisible = el.style.display === 'block';
            el.style.display = isVisible ? 'none' : 'block';
            document.querySelectorAll('.faq-icon')[id].innerText = isVisible ? '+' : '‚àí';
        }

        function showCalc() {
            if(!document.getElementById('car-num').value) return tg.showAlert("–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –º–∞—à–∏–Ω—ã");
            const isTashkent = document.getElementById('region-checkbox').checked;
            let price = isTashkent ? "192 000,00" : "160 000,00";
            document.getElementById('final-price-display').innerText = price + " —Å—û–º";
            document.getElementById('screen-form').style.display = 'none';
            document.getElementById('screen-result').style.display = 'block';
            tg.HapticFeedback.impactOccurred('medium');
        }

        function sendData() {
            const data = { car: document.getElementById('car-num').value, price: document.getElementById('final-price-display').innerText };
            tg.sendData(JSON.stringify(data));
            tg.close();
        }
    </script>
</body>
</html>
